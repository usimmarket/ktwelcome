<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KT WELCOME 가입신청서</title>
<style>
  :root{--bg:#0c1322;--card:#fff;--line:#e5e7eb;--muted:#6b7280;--title:#0f172a;--accent:#0ea5e9}
  html,body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif}
  .wrap{max-width:980px;margin:0 auto;padding:16px}
  /* Top bar */
  .top{position:sticky;top:0;background:var(--bg);z-index:5;padding:10px 0}
  .toprow{display:flex;align-items:center;gap:12px}
  .logo img{height:28px}
  .titlewrap{flex:1;display:flex;justify-content:center;align-items:center;gap:8px}
  .title{color:#fff;font-weight:700}
  .badge{font-size:11px;color:#e5e7eb;border:1px solid rgba(203,213,225,.35);padding:2px 6px;border-radius:999px}
  .langs{display:flex;gap:8px}
  .chip{border:1px solid rgba(203,213,225,.45);color:#cbd5e1;background:transparent;border-radius:999px;padding:6px 10px;cursor:pointer}
  .chip.active{background:#334155;border-color:#334155;color:#fff}
  /* Card */
  .card{background:var(--card);border-radius:14px;margin:12px 0;padding:16px;box-shadow:0 1px 3px rgba(0,0,0,.08)}
  .card h3{margin:0 0 10px 0;color:var(--title);font-size:18px}
  /* Inputs */
  label{display:block;color:#64748b;margin:8px 0 6px;font-size:13px}
  input[type=text],select{width:100%;padding:11px 12px;border:1px solid var(--line);border-radius:10px;font-size:14px}
  input[readonly]{background:#f3f4f6;color:#6b7280}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:860px){ .grid{grid-template-columns:1fr} }
  .seg{display:flex;gap:14px;align-items:center;margin:6px 0}
  .seg label{margin:0;color:#111;font-size:14px}
  .note{font-size:12px;color:#6b7280;margin-top:6px}
  .btnbar{display:flex;gap:10px;justify-content:flex-end;margin:14px 0 32px}
  .btn{appearance:none;border:1px solid #cbd5e1;background:#fff;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
  .hide{display:none}
</style>
</head>
<body>
<div class="wrap">

  <!-- 상단: 좌 로고 / 중앙 타이틀(배지) / 우측 언어 한 줄 -->
  <div class="top">
    <div class="toprow">
      <div class="logo"><img src="./USIMMARKET.png" alt="usim market" onerror="this.style.display='none'"></div>
      <div class="titlewrap">
        <div class="title">KT WELCOME 가입신청서</div>
        <span class="badge">판매점 전용</span>
      </div>
      <div class="langs">
        <button class="chip active" data-lang="KR">KR</button>
        <button class="chip" data-lang="US">US</button>
        <button class="chip" data-lang="VN">VN</button>
        <button class="chip" data-lang="TH">TH</button>
        <button class="chip" data-lang="KH">KH</button>
      </div>
    </div>
  </div>

  <!-- 서버로 직접 제출 -->
  <form action="/generate" method="POST" target="_blank" id="form">

    <!-- 요금제 -->
    <section class="card">
      <h3>요금제</h3>
      <div class="grid">
        <div>
          <label>요금제</label>
          <select name="plan" id="plan" required>
            <option value="">선택</option>
            <option value="wel5">5G 웰컴5 (통화200분/25GB+5Mbps)</option>
            <option value="wel3">5G 웰컴3 (통화200분/3GB+5Mbps)</option>
            <option value="wel1">5G 웰컴1 (통화200분/1GB+3Mbps)</option>
          </select>
        </div>
        <div class="grid">
          <div>
            <label>총 요금할인</label>
            <input type="text" id="p_total" readonly/>
          </div>
          <div>
            <label>월 이용료</label>
            <input type="text" id="p_monthly" readonly/>
          </div>
          <div>
            <label>요금할인</label>
            <input type="text" id="p_disc" readonly/>
          </div>
          <div>
            <label>월 청구금액</label>
            <input type="text" id="p_bill" readonly/>
          </div>
        </div>
      </div>
      <div class="note">요금제 선택 시 위 항목은 자동 계산됩니다.</div>
    </section>

    <!-- 고객정보 -->
    <section class="card">
      <h3>고객정보</h3>

      <div class="seg">
        <label><input type="radio" name="join_type" value="new" checked> 신규</label>
        <label><input type="radio" name="join_type" value="port"> 번호이동</label>
      </div>

      <div class="grid">
        <div>
          <label>가입자명</label>
          <input type="text" value="성함과 사인은 직접 작성 필수" readonly/>
        </div>
        <div>
          <label>주소</label>
          <input type="text" name="address" id="address" placeholder="도로명 주소"/>
        </div>

        <div>
          <label>생년월일</label>
          <input type="text" name="birth" id="birth" inputmode="numeric" pattern="\d*" placeholder="6 또는 8자리 숫자"/>
        </div>
        <div>
          <label>성별</label>
          <div class="seg">
            <label><input type="radio" name="gender" value="남"> 남</label>
            <label><input type="radio" name="gender" value="여"> 여</label>
          </div>
        </div>

        <div>
          <label>희망번호(4자리)</label>
          <input type="text" id="wish4" inputmode="numeric" pattern="\d*"/>
        </div>
        <div>
          <label>유심 일련번호</label>
          <input type="text" name="sim_serial" id="sim_serial"/>
        </div>
      </div>

      <!-- 번호이동 전용 -->
      <div class="grid hide" id="portBox">
        <div>
          <label>이동할 전화번호</label>
          <input type="text" name="port_number" id="port_number" inputmode="numeric" pattern="\d*"/>
        </div>
        <div>
          <label>변경전 통신사</label>
          <select name="prev_carrier" id="prev_carrier">
            <option value="">선택</option>
            <option>SK</option>
            <option>LG U+</option>
            <option>MVNO</option>
          </select>
        </div>
        <div class="hide" id="mvnoBox">
          <label>통신사명(MVNO)</label>
          <input type="text" name="mvno_name" id="mvno_name"/>
        </div>
      </div>
    </section>

    <!-- 유심정보 -->
    <section class="card">
      <h3>유심정보</h3>
      <div class="grid">
        <div>
          <label>일련번호</label>
          <input type="text" name="sim_serial_dummy" placeholder="고객정보에 입력한 값 사용" readonly/>
        </div>
        <div>
          <label>유심비용</label>
          <input type="text" value="7,700원 후납" readonly/>
        </div>
      </div>
    </section>

    <!-- 자동이체 -->
    <section class="card">
      <h3>자동이체</h3>

      <label>문자안내 선호언어</label>
      <div class="seg">
        <label><input type="radio" name="pref_langs" value="영어">영어</label>
        <label><input type="radio" name="pref_langs" value="중국어">중국어</label>
        <label><input type="radio" name="pref_langs" value="베트남어">베트남어</label>
        <label><input type="radio" name="pref_langs" value="러시아어">러시아어</label>
        <label><input type="radio" name="pref_langs" value="한국어" checked>한국어</label>
      </div>

      <label>방식</label>
      <div class="seg">
        <label><input type="radio" name="payMethod" value="bank" checked> 은행</label>
        <label><input type="radio" name="payMethod" value="card"> 카드</label>
      </div>

      <!-- 은행 -->
      <div class="grid" id="bankBox">
        <div>
          <label>예금주명</label>
          <input type="text" value="성함과 사인은 직접 작성 필수" readonly/>
        </div>
        <div>
          <label>은행</label>
          <input type="text" name="bank_name" id="bank_name"/>
        </div>
        <div>
          <label>계좌번호</label>
          <input type="text" name="bank_account" id="bank_account" inputmode="numeric" pattern="\d*"/>
        </div>
      </div>

      <!-- 카드 -->
      <div class="grid hide" id="cardBox">
        <div>
          <label>카드주명</label>
          <input type="text" value="성함과 사인은 직접 작성 필수" readonly/>
        </div>
        <div>
          <label>카드사</label>
          <input type="text" name="card_company" id="card_company"/>
        </div>
        <div>
          <label>카드번호</label>
          <input type="text" name="card_number" id="card_number" inputmode="numeric" pattern="\d*"/>
        </div>
        <div>
          <label>유효기간(년)</label>
          <input type="text" name="card_exp_year" id="card_exp_year" inputmode="numeric" pattern="\d*"/>
        </div>
        <div>
          <label>유효기간(월)</label>
          <input type="text" name="card_exp_month" id="card_exp_month" inputmode="numeric" pattern="\d*"/>
        </div>
      </div>

      <div class="note">※ 가입자명/예금주명/카드주명은 자필 작성(출력 후)</div>
    </section>

    <!-- 부가서비스 -->
    <section class="card">
      <h3>부가서비스</h3>
      <div class="seg">
        <button type="button" class="btn" disabled>국제전화 차단: 적용</button>
        <button type="button" class="btn" disabled>로밍차단: 적용</button>
      </div>
    </section>

    <div class="btnbar">
      <button class="btn" type="reset">초기화</button>
      <button class="btn primary" type="submit" name="mode" value="download">PDF 저장</button>
      <button class="btn" type="submit" name="mode" value="inline">인쇄</button>
    </div>
  </form>
</div>

<script>
/* 숫자만 입력 */
['birth','bank_account','card_number','card_exp_year','card_exp_month','port_number','wish4']
  .forEach(id=>{const el=document.getElementById(id); if(!el) return;
    el.addEventListener('input',()=>{el.value=(el.value||'').replace(/\D+/g,'');});});

/* 번호이동 토글 */
function updateJoin(){
  const isPort=document.querySelector('input[name="join_type"]:checked')?.value==='port';
  document.getElementById('portBox').classList.toggle('hide',!isPort);
}
document.querySelectorAll('input[name="join_type"]').forEach(r=>r.addEventListener('change',updateJoin));
updateJoin();

/* MVNO 입력칸 토글 */
document.getElementById('prev_carrier')?.addEventListener('change',e=>{
  document.getElementById('mvnoBox').classList.toggle('hide', e.target.value!=='MVNO');
});

/* 결제방식 토글 */
function updatePay(){
  const pm=document.querySelector('input[name="payMethod"]:checked')?.value||'bank';
  document.getElementById('bankBox').classList.toggle('hide', pm!=='bank');
  document.getElementById('cardBox').classList.toggle('hide', pm!=='card');
}
document.querySelectorAll('input[name="payMethod"]').forEach(r=>r.addEventListener('change',updatePay));
updatePay();

/* 요금제 표시값 자동 세팅(표시용) */
const PLAN_MAP={
  wel5:{total:'177,000', monthly:'59,000', disc:'20,250', bill:'38,750'},
  wel3:{total:'147,000', monthly:'49,000', disc:'15,550', bill:'33,450'},
  wel1:{total:'117,000', monthly:'39,000', disc:'13,050', bill:'25,950'}
};
function updatePlan(){
  const p=document.getElementById('plan').value;
  const v=PLAN_MAP[p]||{total:'',monthly:'',disc:'',bill:''};
  document.getElementById('p_total').value=v.total;
  document.getElementById('p_monthly').value=v.monthly;
  document.getElementById('p_disc').value=v.disc;
  document.getElementById('p_bill').value=v.bill;
}
document.getElementById('plan').addEventListener('change',updatePlan);

/* 필수값 간단 체크 */
document.getElementById('form').addEventListener('submit', e=>{
  const required = [
    ['plan','요금제'],
    ['sim_serial','유심 일련번호'],
    // 성별 라디오는 별도로 확인
  ];
  for(const [n,label] of required){
    const el=document.querySelector(`[name="${n}"]`);
    if(!el || !(el.value||'').trim()){ e.preventDefault(); alert(label+'은(는) 필수입니다.'); return; }
  }
  const g=document.querySelector('input[name="gender"]:checked');
  if(!g){ e.preventDefault(); alert('성별은 필수입니다.'); return; }
});
</script>
</body>
</html>
